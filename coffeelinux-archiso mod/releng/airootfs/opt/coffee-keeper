#!/bin/sh

sleep 20
#Update existing OS first
pacman -Syu --noconfirm
yay -Syu --noconfirm
#Coffee Package Updates
newcontent="python-pipx"
pacman -Sy --noconfirm $newcontent
#Removal of any unwanted packages
pacman -Rdd --noconfirm blueman
pacman -Rdd --noconfirm kmix
#Remove any unwanted files
rm /usr/share/applications/steam-native.desktop
rm /usr/share/applications/stoken-gui-small.desktop
#Replace CoffeeLinux Files
rm /opt/os-release
rm /opt/lsb-release
rm /etc/os-release
rm /etc/lsb-release
rm /opt/coffee-injector
rm /opt/coffee-updater
rm /opt/wallpaper-updater
rm /opt/coffee-wallpapers.service
rm /usr/local/bin/coffeebrewer-custom
rm /usr/local/bin/coffeebrewer-cinnamon
rm /usr/local/bin/coffeebrewer-kde
rm /usr/local/bin/coffeebrewer-gnome
rm /usr/local/bin/coffeebrewer-sway
wget -L https://raw.githubusercontent.com/Project-X-Mods/coffeelinux/master/coffeelinux-archiso%20mod/releng/airootfs/opt/coffee-injector -P /opt/
wget -L https://raw.githubusercontent.com/Project-X-Mods/coffeelinux/master/coffeelinux-archiso%20mod/releng/airootfs/opt/wallpaper-updater -P /opt/
wget -L https://raw.githubusercontent.com/Project-X-Mods/coffeelinux/master/coffeelinux-archiso%20mod/releng/airootfs/opt/coffee-wallpapers.service -P /opt/
wget -L https://raw.githubusercontent.com/Project-X-Mods/coffeelinux/master/coffeelinux-archiso%20mod/releng/airootfs/opt/coffee-updater -P /opt/
wget -L https://raw.githubusercontent.com/Project-X-Mods/coffeelinux/master/coffeelinux-archiso%20mod/releng/airootfs/opt/os-release -P /opt/
wget -L https://raw.githubusercontent.com/Project-X-Mods/coffeelinux/master/coffeelinux-archiso%20mod/releng/airootfs/opt/lsb-release -P /opt/
wget -L https://raw.githubusercontent.com/Project-X-Mods/coffeelinux/master/coffeelinux-archiso%20mod/releng/airootfs/opt/os-release -P /etc/
wget -L https://raw.githubusercontent.com/Project-X-Mods/coffeelinux/master/coffeelinux-archiso%20mod/releng/airootfs/opt/lsb-release -P /etc/
wget -L https://raw.githubusercontent.com/Project-X-Mods/coffeelinux/master/coffeelinux-archiso%20mod/releng/airootfs/usr/local/bin/coffeebrewer-custom -P /usr/local/bin/
wget -L https://raw.githubusercontent.com/Project-X-Mods/coffeelinux/master/coffeelinux-archiso%20mod/releng/airootfs/usr/local/bin/coffeebrewer-kde -P /usr/local/bin/
wget -L https://raw.githubusercontent.com/Project-X-Mods/coffeelinux/master/coffeelinux-archiso%20mod/releng/airootfs/usr/local/bin/coffeebrewer-cinnamon -P /usr/local/bin/
wget -L https://raw.githubusercontent.com/Project-X-Mods/coffeelinux/master/coffeelinux-archiso%20mod/releng/airootfs/usr/local/bin/coffeebrewer-gnome -P /usr/local/bin/
wget -L https://raw.githubusercontent.com/Project-X-Mods/coffeelinux/master/coffeelinux-archiso%20mod/releng/airootfs/usr/local/bin/coffeebrewer-sway -P /usr/local/bin/
chmod 755 /opt/wallpaper-updater
chmod 755 /opt/coffee-updater
chmod 755 /opt/coffee-injector
chmod 755 /usr/local/bin/coffeebrewer-custom
chmod 755 /usr/local/bin/coffeebrewer-kde
chmod 755 /usr/local/bin/coffeebrewer-gnome
chmod 755 /usr/local/bin/coffeebrewer-cinnamon
chmod 755 /usr/local/bin/coffeebrewer-sway
cp /opt/coffee-wallpaper.service /lib/systemd/system/
systemctl enable coffee-wallpapers.service
exit
